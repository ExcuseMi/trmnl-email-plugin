---
strategy: polling
no_screen_padding: 'no'
dark_mode: 'no'
static_data: ''
polling_verb: post
polling_url: https://trmnl.bettens.dev/email/messages
polling_headers: content-type=application/json
polling_body: "{\r\n  {% if provider == \"gmail\" %}\r\n  \"server\": \"imap.gmail.com\",\r\n  \"port\": 993,\r\n  \"password\": {{ gmail_password | json }}\r\n  {% elsif provider == \"outlook\" %}\r\n  \"server\": \"outlook.office365.com\",\r\n  \"port\": 993,\r\n  \"password\": {{ outlook_password | json }}\r\n  {% elsif provider == \"yahoo\" %}\r\n  \"server\": \"imap.mail.yahoo.com\",\r\n  \"port\": 993,\r\n  \"password\": {{ yahoo_password | json }}\r\n  {% elsif provider == \"icloud\" %}\r\n  \"server\": \"imap.mail.me.com\",\r\n  \"port\": 993,\r\n  \"password\": {{ icloud_password | json }}\r\n  {% elsif provider == \"custom\" %}\r\n  \"server\": {{ custom_server | json }},\r\n  \"port\": {{ custom_port | default: 993 | plus: 0 }},\r\n  \"password\": {{ custom_password | json }}\r\n  {% endif %},\r\n\r\n  \"username\": {{ email | json }},\r\n  \"folder\": {{ folder | default: \"INBOX\" | json }},\r\n  \"limit\": {{ limit | default: 10 | plus: 0 }},\r\n  \"unread_only\": {% if unread_only == \"yes\" %}true{% else %}false{% endif %},\r\n  \"flagged_only\": {% if flagged_only == \"yes\" %}true{% else %}false{% endif %}\r\n\r\n  {% if provider == \"gmail\" and gmail_category and gmail_category != \"\" %},\r\n  \"gmail_category\": {{ gmail_category | json }}\r\n  {% endif %}\r\n\r\n  {% if from_emails and from_emails != \"\" %},\r\n  \"from_emails\": {{ from_emails | json }}\r\n  {% endif %}\r\n}"
id: 198482
custom_fields:
- keyname: author_bio
  field_type: author_bio
  name: About This Plugin
  description: |
    Display your recent emails on your TRMNL display.<br /><br />
    This plugin connects to your email account via IMAP and shows your latest messages with customizable filters and display options.<br /><br />
    <strong>IMAP support:</strong> Works with Gmail, Outlook, Yahoo, iCloud, and custom IMAP servers<br />
    <strong>Real-time updates:</strong> Shows the latest emails from your inbox<br />
    <strong>Advanced filtering:</strong> Filter by sender, category, or importance<br />
    <strong>Custom display:</strong> Control how emails appear on your screen
  category: email
  github_url: https://github.com/ExcuseMi/trmnl-email-messages-plugin
- keyname: provider
  field_type: select
  name: Email Provider
  description: Select your email provider for automatic IMAP configuration.
  help_text: |
    The plugin will automatically configure IMAP settings for popular providers:<br /><br />
    <strong>Popular providers:</strong> Gmail, Outlook, Yahoo, iCloud<br />
    <strong>Custom:</strong> For other email services with IMAP support<br /><br />
    <em>Select your provider to see specific setup instructions.</em>
  default: gmail
  options:
  - Gmail: gmail
  - Outlook: outlook
  - Yahoo: yahoo
  - iCloud: icloud
  - Custom IMAP Server: custom
  conditional_validation:
  - when: gmail
    hidden:
    - outlook_password
    - yahoo_password
    - icloud_password
    - custom_password
    - custom_server
    - custom_port
  - when: outlook
    hidden:
    - gmail_password
    - gmail_category
    - yahoo_password
    - icloud_password
    - custom_password
    - custom_server
    - custom_port
  - when: yahoo
    hidden:
    - gmail_password
    - gmail_category
    - outlook_password
    - icloud_password
    - custom_password
    - custom_server
    - custom_port
  - when: icloud
    hidden:
    - gmail_password
    - gmail_category
    - outlook_password
    - yahoo_password
    - custom_password
    - custom_server
    - custom_port
  - when: custom
    hidden:
    - gmail_password
    - gmail_category
    - outlook_password
    - yahoo_password
    - icloud_password
- keyname: email
  field_type: string
  name: Email Address
  description: Your full email address for IMAP connection.
  placeholder: yourname@example.com
  help_text: |
    <strong>Examples:</strong><br />
    • yourname@gmail.com<br />
    • your.name@outlook.com<br />
    • username@company.com<br /><br />
    <em>Use the same email you use to log into your email service.</em>
- keyname: gmail_password
  field_type: password
  name: Gmail App Password
  description: Application-specific password for Gmail IMAP access.
  help_text: |
    <strong>IMPORTANT:</strong> Never use your regular Gmail password!<br /><br />
    1. Enable 2-Factor Authentication on your Google account<br />
    2. Generate a 16-character app password at <a href="https://myaccount.google.com/apppasswords" target="_blank" rel="noopener">Google App Passwords</a><br />
    3. Enter the generated password below<br /><br />
    <em>App passwords are more secure and can be revoked if needed.</em>
- keyname: outlook_password
  field_type: password
  name: Outlook App Password
  description: Application password for Outlook IMAP access.
  help_text: |
    <strong>Setup Steps:</strong><br /><br />
    1. Enable IMAP in your <a href='https://support.microsoft.com/en-us/office/pop-imap-and-smtp-settings-for-outlook-com-d088b986-291d-42b8-9564-9c414e2aa040' target='_blank' rel='noopener'>Outlook settings</a><br />
    2. Create an app password from your <a href='https://account.live.com/proofs/AppPassword' target='_blank' rel='noopener'>Microsoft account security page</a><br />
    3. Wait 20-30 minutes for activation<br />
    4. Approve the connection in <a href='https://account.live.com/activity' target='_blank' rel='noopener'>account activity</a> if prompted<br /><br />
    <strong>Note:</strong> New Outlook accounts may have limited IMAP support.
- keyname: yahoo_password
  field_type: password
  name: Yahoo App Password
  description: Application password for Yahoo Mail IMAP access.
  help_text: |
    <strong>App password required for IMAP access.</strong><br /><br />
    Generate in your Yahoo Account Security settings under "App passwords".<br /><br />
    <em>Do not use your regular Yahoo password for security reasons.</em>
- keyname: icloud_password
  field_type: password
  name: iCloud App-Specific Password
  description: App-specific password for iCloud IMAP access.
  help_text: |
    <strong>2-Factor Authentication required.</strong><br /><br />
    1. Go to <a href="https://appleid.apple.com" target="_blank" rel="noopener">Apple ID Security</a><br />
    2. Generate an app-specific password<br />
    3. Enter the generated password below<br /><br />
    <em>You must have 2FA enabled on your Apple ID to generate app-specific passwords.</em>
- keyname: custom_password
  field_type: password
  name: IMAP Password
  description: Password for custom IMAP server authentication.
  help_text: |
    Check with your email provider for specific IMAP authentication requirements.<br /><br />
    <em>For better security, use an app-specific password if your provider supports it.</em>
- keyname: custom_server
  field_type: string
  name: IMAP Server Address
  description: IMAP server hostname for your email provider.
  placeholder: imap.example.com
  help_text: |
    <strong>Examples:</strong><br />
    • imap.example.com<br />
    • mail.example.com<br />
    • imap.example.net<br /><br />
    <em>Contact your email provider or check their documentation if you're unsure of the server address.</em>
- keyname: custom_port
  field_type: number
  name: IMAP Port
  description: Port number for IMAP connection.
  default: 993
  min: 1
  max: 65535
  help_text: |
    <strong>Recommended: 993</strong> (SSL/TLS encrypted connection)<br /><br />
    Use 143 only if your provider requires non-SSL IMAP.<br /><br />
    <em>Always prefer encrypted connections for security. Most modern email providers use port 993.</em>
- keyname: folder
  field_type: string
  name: Mailbox Folder
  description: Email folder to display messages from.
  default: INBOX
  placeholder: INBOX
  help_text: |
    <strong>Common folders:</strong><br />
    • INBOX - Main inbox<br />
    • Sent - Sent messages<br />
    • Drafts - Draft messages<br />
    • Trash - Deleted messages<br />
    • Spam - Junk folder<br />
    • [Custom] - Any folder name you've created<br /><br />
    <em>Note: Folder names are case-sensitive in most IMAP servers.</em>
- keyname: gmail_category
  field_type: select
  name: Gmail Category Filter
  description: Filter emails by Gmail category.
  default: ''
  options:
  - All Categories: ''
  - Primary (Personal): Primary
  - Social (Social Networks): Social
  - Promotions (Deals & Ads): Promotions
  - Updates (Confirmations): Updates
  - Forums (Mailing Lists): Forums
  help_text: |
    Gmail automatically sorts emails into categories:<br /><br />
    <strong>Primary:</strong> Personal emails from people<br />
    <strong>Social:</strong> Social network notifications<br />
    <strong>Promotions:</strong> Deals, offers, marketing emails<br />
    <strong>Updates:</strong> Confirmations, receipts, statements<br />
    <strong>Forums:</strong> Mailing lists, newsletters, discussion groups<br /><br />
    Select 'All Categories' to show emails from every category.
- keyname: limit
  field_type: number
  name: Number of Messages
  description: How many emails to display on your TRMNL screen.
  default: 10
  min: 1
  max: 30
  help_text: ''
- keyname: unread_only
  field_type: select
  name: Show Unread Only
  description: Display only unread email messages.
  default: 'no'
  optional: true
  options:
  - Yes - Unread only: 'yes'
  - No - Show all: 'no'
  help_text: |
    <strong>Use cases:</strong><br />
    • See what needs your attention<br />
    • Monitor incoming emails<br />
    • Focus on new messages only<br /><br />
    <em>Tip: Combine with other filters for more specific results.</em>
- keyname: flagged_only
  field_type: select
  name: Show Flagged Only
  description: Display only flagged/starred email messages.
  default: 'no'
  optional: true
  options:
  - Yes - Important only: 'yes'
  - No - Show all: 'no'
  help_text: |
    <strong>Great for:</strong><br />
    • Tracking emails that need follow-up<br />
    • Monitoring important conversations<br />
    • Focusing on priority messages<br /><br />
    <em>Flag emails in your email client to mark them as important.</em>
- keyname: from_emails
  field_type: multi_string
  name: Filter by Sender
  description: Only show emails from specific senders.
  placeholder: email@domain.com
  optional: true
  help_text: |
    Supports flexible matching:<br /><br />
    <strong>Examples:</strong><br />
    • <code>boss@company.com</code> - Specific person<br />
    • <code>@company.com</code> - Everyone at company.com domain<br />
    • <code>support</code> - Matches any address containing "support"<br />
    • <code>@gmail.com</code> - All Gmail senders<br /><br />
    <em>Leave empty to show emails from all senders.</em>
- keyname: read_subject_regular
  field_type: select
  name: Display Read Emails as Regular Text
  description: Show read emails with regular text weight.
  default: 'yes'
  optional: true
  options:
  - Yes - Regular text: 'yes'
  - No - Keep bold: 'no'
  help_text: |
    <strong>Visual distinction between read and unread emails:</strong><br /><br />
    • <strong>Read emails:</strong> Regular text weight<br />
    • <strong>Unread emails:</strong> Bold text weight<br /><br />
    Makes it easier to spot new messages at a glance.
- keyname: show_sender_email
  field_type: select
  name: Show Email Address Instead of Name
  description: Choose what to display for each sender.
  default: 'no'
  optional: true
  options:
  - Yes - Show address: 'yes'
  - No - Show name: 'no'
  help_text: |
    <strong>Use email addresses when:</strong><br />
    • Sender names aren't helpful or are missing<br />
    • You need to see the exact email address<br />
    • Working with automated or system emails
- keyname: group_by_date
  field_type: select
  name: Group Emails by Date
  description: Organize emails under date headers.
  default: 'yes'
  optional: true
  options:
  - No - Dates inline: 'no'
  - Yes - Group with headers: 'yes'
  help_text: |
    <strong>Grouped view:</strong><br />
    • Today<br />
    &nbsp;&nbsp;10:30 AM · sender@example.com<br />
    &nbsp;&nbsp;11:45 AM · other@example.com<br />
    • Yesterday<br />
    &nbsp;&nbsp;2:15 PM · another@example.com<br /><br />
    <strong>Ungrouped view:</strong><br />
    • 10:30 AM · sender@example.com<br />
    • Dec 17 · other@example.com<br /><br />
    <em>When grouped, all emails show time only (date is in the header).</em>
- keyname: time_format
  field_type: select
  name: Time Format
  description: How to display message times.
  default: 24h
  optional: true
  options:
  - 24-hour (14:30): 24h
  - 12-hour with AM/PM (2:30 PM): 12h
  help_text: 'Choose based on your preference and regional conventions.

    '
- keyname: date_format
  field_type: select
  name: Date Format
  description: How to display dates for emails.
  default: short
  optional: true
  options:
  - Short (Dec 18): short
  - Medium (Dec 18, 2024): medium
  - Long (December 18, 2024): long
  - Numeric (12/18/24): numeric
  - ISO Date (2024-12-18): iso
  help_text: Choose based on your display size and personal preference.
name: Email Messages
refresh_interval: 60
